<html>
<meta charset="utf-8" />
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="-1" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:url"				content="" />
<meta property="og:type"			content="article" />
<meta property="og:description"		content="">
<meta property="og:title"			content="Math Tournament" />
<meta property="og:image"			content="" />
<head>
	<title>Math Tournament</title>
	<link rel="stylesheet" type="text/css" href="css/site.css"> 
    <link rel="stylesheet" type="text/css" href="css/custom_fonts.css">
    <script  src="js/lib/jquery-3.1.1.min.js"></script>
    <script  src="js/lib/jquery.gsap.min.js"></script>
    <script  src="js/lib/TimelineMax.min.js"></script>
    <script  src="js/lib/TweenMax.min.js"></script>
</head>
<script>
	var server = parent.server;
</script>
<body>
    
    <section id="logoMath">
        <img src="img/logoMath.png"/>
    </section>
    
    <section id="monsters-section">
        <div class="monster-sec-img"><img class="left-monster" src="img/eagle-bg.png"/></div>
        <div class="monster-sec-img"><img class="right-monster" src="img/luna-bg.png"/></div>
    </section>
    <section id="selectLevel">
        <div class="titleSection">Select Level</div>
        <div class="textWhiteTitle">Select Level</div>
        <div id="levelBasicButton" class="optionLevel">
            <div class="imageLevel"><img src="img/levelBasic.png"></div>
            <p>A difficult level is for <br>novice players</p>
            <div id="basicLevel" class="buttonLevel">
                <span>BASIC</span>
                
            </div>
        </div>
        <div id="levelMediumButton" class="optionLevel">
            <div class="imageLevel"><img src="img/levelMedium.png"></div>
            <p>Mild play for experienced <br>players</p>
            <div id="mediumLevel" class="buttonLevel">
                <span>MEDIUM</span>
            </div>
        </div>
        <div id="leveladvanceButton" class="optionLevel">
            <div class="imageLevel"><img src="img/levelAdvance.png"></div>
            <p>Advanced play for adept <br>players</p>
            <div id="advanceLevel"  class="buttonLevel">
                <span>ADVANCE</span>
            </div>
        </div>
    </section>
    <section id="waitingPlayers">
            <div class="titleSection">Waiting players</div>
        <div class="textWhiteTitle">Waiting players</div>
        <div id="selectP1">
            <div class="characterSelection">
                <img src="img/character_p1.png">
            </div>
            <div id="nickNameP1" class="nickNamePlayer">Player 1</div>
        </div>
        <div id="joinPin">
            Join with Game PIN:<br><br>
            <div id="pinNumber"></div><br>
            <div id="beginGame">
                START
            </div>
        </div>
        <div id="selectP2">
            <div class="characterSelection">
                <img src="img/character_p2.png">
            </div>
            <div id="nickNameP2" class="nickNamePlayer">Player 2</div>
        </div>
    </section>
    <footer>
        <div id="startGameButton" class="offBgButton">PLAY</div>
        <div>About Us |  Apps |  Contact Us  |  Terms & Conditions | Kids & Online Safety </div>
        <p>vÂ© 2017, Yogome, Inc. All rights reserved</p>
    </footer>
    
    <div id="backgroundBody"><div id="cortainBlack"></div></div>
    
</body>
<script>

//	var level = 1;
//	server = new Server(level);
//	server.start();

	var Yogotars = {
		"eagle":"img/yogotars/yogotar1.png",
		"luna":"img/yogotars/yogotar2.png"
	}
    
    server.addEventListener("onInitPlayer", showYogotar)

    function showYogotar(event){
    	console.log(event)
    	var numPlayer = event.numPlayer, player = event.player
    	var img = Yogotars[player.avatar];
    	if(numPlayer === 1){
			$("#selectP1").find("img").attr("src", img);
			$("#nickNameP1").text(player.nickname)
        }else{
            $("#selectP2").find("img").attr("src", img);
//            $("#selectP2").find("img").css("width", "-100%");
            $("#nickNameP2").text(player.nickname)

        }
    }
    
	server.addEventListener('onPlayersReady', onPlayersReady);

    $("#selectLevel").hide();
    $("#waitingPlayers").hide();
    var blurElement = {a:0};
    var gameReady = false;
//TweenMax.to(blurElement, 1, {a:10, onUpdate:applyBlur});

    function onPlayersReady(){
        gameReady = true;
		$("#beginGame").css("opacity", 1);
        
    }

    function applyBlur(){
    TweenMax.set(['#backgroundBody'], {webkitFilter:"blur(" + blurElement.a + "px)",filter:"blur(" + blurElement.a + "px)"});  };

	$("#beginGame").mousedown(function(){
		//lanzar el juego
        if(gameReady) {
			server.removeEventListener('onPlayersReady', onPlayersReady);
			server.removeEventListener('onInitPlayer', showYogotar);
        	window.open("battle.html", "_self")
		}

	});

    $("#startGameButton").mousedown(function(){
        $("#startGameButton").toggleClass("onBgButton");
        $("#startGameButton").prop( "disabled", false );
        createGame();
    });

    function createGame(){
        TweenMax.fromTo($("#startGameButton"),0.5,{scale:1},{scale:0,ease:Back.easeIn});
        TweenMax.fromTo($(".left-monster"),0.5,{x:0},{x:"50%",ease:Back.easeIn});
        TweenMax.fromTo($(".right-monster"),0.5,{x:0},{x:"-50%",ease:Back.easeIn});
        TweenMax.fromTo($("#cortainBlack"),0.5,{alpha:0},{alpha:1,delay:0.5,onComplete:NextScene1});
    }
    
    
function NextScene1(){
        $(".left-monster").hide();
        $(".right-monster").hide(); 
        $("#cortainBlack").css("background-color","rgba(0,0,0,1)");
        $("#cortainBlack").css("z-index",0);
        TweenMax.fromTo($("#cortainBlack"),0.5,{alpha:0},{alpha:0.5});
        TweenMax.fromTo($("#logoMath"),0.5,{scale:1,y:0},{scale:0.6,y:-20});
    TweenMax.to(blurElement, 1, {a:5, onUpdate:applyBlur});
        SelectLevel();
}
    
function SelectLevel(){
    $("#selectLevel").show();
    $("#levelBasicButton,#levelMediumButton,#leveladvanceButton").show();
    $("#levelBasicButton,#levelMediumButton,#leveladvanceButton").css("position","relative");
    $("#levelBasicButton,#levelMediumButton,#leveladvanceButton").css("opacity",1);
    TweenMax.to($("#levelBasicButton,#levelMediumButton,#leveladvanceButton"),0.2,{css:{transform:"matrix(1, 0, 0, 1, 0, 0)"}});
    TweenMax.to($("#levelBasicButton,#levelMediumButton,#leveladvanceButton"),0.2,{left:'0%'}); 
    TweenMax.fromTo($("#levelBasicButton"),0.5,{scale:0,alpha:0},{scale:1,alpha:1,ease:Back.easeOut});
    TweenMax.fromTo($("#levelMediumButton"),0.5,{scale:0,alpha:0},{scale:1,alpha:1,ease:Back.easeOut,delay:0.2});
    TweenMax.fromTo($("#leveladvanceButton"),0.5,{scale:0,alpha:0},{scale:1,alpha:1,ease:Back.easeOut,delay:0.4});
    $("#levelBasicButton,#levelMediumButton,#leveladvanceButton").mouseover(function(){TweenMax.to($(this),0.5,{scale:1.1});});
    $("#levelBasicButton,#levelMediumButton,#leveladvanceButton").mouseout(function(){TweenMax.to($(this),0.5,{scale:1});});
        $("#levelBasicButton,#levelMediumButton,#leveladvanceButton").click(function(){
			var level = 1;
			server = new Server(level);
			server.start();

        	$("#levelBasicButton,#levelMediumButton,#leveladvanceButton").unbind("mouseover");
            $("#levelBasicButton,#levelMediumButton,#leveladvanceButton").unbind("mouseout");
            TweenMax.to($("#levelBasicButton,#levelMediumButton,#leveladvanceButton"),0.5,{scale:0,onComplete:hideLevels});
            //$(this).css("position","absolute");
            TweenMax.to($(this),0.2,{scale:1}); 
            //TweenMax.to($(this),0.2,{css:{transform:"matrix(1, 0, 0, 1, -300, 0)"}}); 
            var object = this;
            function hideLevels(){
                //$("#levelBasicButton,#levelMediumButton,#leveladvanceButton").hide();
                //$(object).show();
                TweenMax.to(object,0.5,{scale:3,alpha:0,delay:1,onComplete:NextScene2});
            }
        });   
    }
    
function NextScene2(){
    $("#selectLevel").hide();
    $("#waitingPlayers").show();
    $("#pinNumber").text(server.getIdGame())
}
</script>
</html>