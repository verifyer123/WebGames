<html>
<meta charset="utf-8" />
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="-1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />
<head>
    <title>Yogome Minigame</title>

    <!--Style sheets-->
    <link rel="stylesheet" type="text/css" href="../../shared/minigames/css/custom_fonts.css">
    <link rel="stylesheet" type="text/css" href="../../shared/minigames/css/minigame.css">
    <link rel="stylesheet" type="text/css" href="css/index.css">
</head>
<body>
<div id="orientation-overlay" style="visibility: hidden"></div>
<div class="custom-font">
    <p>Created at Yogome, inc.</p>
    <p>www.yogome.com</p>
</div>

<script>
	var onClientInit = function(e){
		var div_resultado = document.getElementById("resultado");
		var btn_start = document.getElementById("start");

		div_resultado.innerText = "init compvaro, jugador: "+cliente.numPlayer;
		btn_start.style.visibility = 'hidden';

		if(cliente.numPlayer!= null){
			document.getElementById("start").disabled =true;
		}
	}

	function onPlayersReady(event) {
		cliente.removeEventListener('onClientInit', onClientInit);
		cliente.removeEventListener('onGameFull', onGameFull);
		cliente.removeEventListener('showPossibleAnswers', onPlayersReady);
		window.open("../mathClient/operations.html", "_self")
	}

	var onGameFull = function(){
		alert("La partida ya se encuentra ocupada");
	}

	var cliente = parent.cliente;
	function startButton(){
		//var idGame = "00000";
		var idGame = document.getElementById("id_game").value;
		var av = document.getElementById("avatar");
		av = av.options[av.selectedIndex].value;
		var player = {
			nickname: document.getElementById("nickname").value,
			avatar: av,
			life: 100
		}
		cliente.addEventListener('onClientInit', onClientInit);
		cliente.addEventListener('onGameFull', onGameFull);
		cliente.addEventListener('showPossibleAnswers', onPlayersReady);
		cliente.start(player, idGame);

	}
</script>

<div id="settings">
<input type="text" id="id_game" />
<input type="button" id="start" onclick="startButton()" value="Start game" /><br/><br/>
<input type="text" id="nickname" placeholder="Nickname" value="aaron" /><br/><br/>
<select id="avatar">
    <option value="1" selected >Eagle</option>
    <option value="2">Luna</option>
    <option value="3">Arthurius</option>
    <option value="4">Theffanie</option>
</select><br/><br/>
<div id="resultado"></div>
</div>

</body>
</html>
