<html>
<meta charset="utf-8" />
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="-1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />
<head>
    <title>Yogome Minigame</title>

    <!--Style sheets-->
    <link rel="stylesheet" type="text/css" href="../../shared/minigames/css/custom_fonts.css">
    <link rel="stylesheet" type="text/css" href="../../shared/minigames/css/minigame.css">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" type="text/css" href="css/custom_fonts.css">
    <script  src="js/jquery-3.1.1.min.js"></script>
</head>
<body>
    <div id="logoMath"><img src="images/logoMath.png"/></div>
<div id="orientation-overlay" style="visibility: hidden"></div>
<div class="custom-font">
    <p>Created at Yogome, inc.</p>
    <p>www.yogome.com</p>
</div>

<script>
    var selectYogotarName;
	var onClientInit = function(e){
		var div_resultado = document.getElementById("resultado");
		var btn_start = document.getElementById("start");

		div_resultado.innerText = "init compvaro, jugador: "+cliente.numPlayer;
		btn_start.style.visibility = 'hidden';

		if(cliente.numPlayer!= null){
			document.getElementById("start").disabled =true;
		}
	}

	function onPlayersReady(event) {
		cliente.removeEventListener('onClientInit', onClientInit);
		cliente.removeEventListener('onGameFull', onGameFull);
		cliente.removeEventListener('showPossibleAnswers', onPlayersReady);
		window.open("../mathClient/operations.html", "_self")
	}

	var onGameFull = function(){
		alert("La partida ya se encuentra ocupada");
	}

	var cliente = parent.cliente;
	function startButton(){
        console.log(selectYogotarName);
		//var idGame = "00000";
		var idGame = document.getElementById("idGame").value;
		var av = document.getElementById("avatar");
		//av = av.search($("div").attr("select").name);
        
		var player = {
			nickname: document.getElementById("nickname").value,
			avatar: selectYogotarName,
			life: 100
		}
		cliente.addEventListener('onClientInit', onClientInit);
		cliente.addEventListener('onGameFull', onGameFull);
		cliente.addEventListener('showPossibleAnswers', onPlayersReady);
		cliente.start(player, idGame);

	}
</script>
    <div id="MenuYogotar">
        <div id="arrowLeft" class="arrow-menu"><img src="images/arrow_left.png"/></div>
        <div id="arrowRight" class="arrow-menu"><img src="images/arrow_right.png"/></div>
    </div>
<div id="settings">
    <!--<select id="avatar">
        <option value="1" selected >Eagle</option>
        <option value="2">Luna</option>
    </select> -->   
        <section id="avatar">
            
        </section>
    
        <p>Write PIN</p>
    <input id="idGame" type="text" id="id_game" />
    <p>Nickname</p>
    <input type="text" id="nickname" placeholder="Player" value="player" />
    <hr>
    <input type="button" id="start" onclick="startButton()" value="Start game" style="box-shadow: 0px 1vh 0px #1b3473;"/>
    <div id="resultado"></div>
</div>
</body>
    <script>
        var yogotarCharacters = [
            {
                index:0,
                name:"Eagle",
                img:"images/eagle.png"
            },
            {   
                index:1,
                name:"Luna",
                img:"images/luna.png"
            }
        ];
            for(var i = 0;i<=yogotarCharacters.length-1;i++){
                $("#avatar").append('<div id="SelectYogotar'+yogotarCharacters[i].index+'" class="yogotarBlock"><img src="'+yogotarCharacters[i].img+'" /></div>');
                $("#SelectYogotar" + +yogotarCharacters[i].index).css("opacity",1-(i*1));
            }
                
           selectYogotarName = yogotarCharacters[0].name;
            var lengthAvatar = $("#avatar").find("div").length;
            var YogoPosx = parseInt($("#SelectYogotar1").css("left"));
            var counter = 0;
            console.log(YogoPosx);
        
            $("#arrowRight").click(function(){ 
                if(counter != lengthAvatar-1){   
                    counter++;
                $("#SelectYogotar" + +yogotarCharacters[counter-1].index).css("opacity",0);
                $("#SelectYogotar" + +yogotarCharacters[counter-1].index).css("left",0);  
                $("#SelectYogotar" + +yogotarCharacters[counter].index).css("left","50%");     
                $("#SelectYogotar" + +yogotarCharacters[counter].index).css("opacity",1);                    
                }
                selectYogotarName = yogotarCharacters[counter].name;
        });
      
        $("#arrowLeft").click(function(){
             if(counter != 0){   
                    counter--;
                $("#SelectYogotar" + +yogotarCharacters[counter+1].index).css("opacity",0);
                $("#SelectYogotar" + +yogotarCharacters[counter+1].index).css("left",0);  
                $("#SelectYogotar" + +yogotarCharacters[counter].index).css("left","50%");     
                $("#SelectYogotar" + +yogotarCharacters[counter].index).css("opacity",1);                    
                }
                selectYogotarName = yogotarCharacters[counter].name;
        });
        
        
    </script>
    
</html>
