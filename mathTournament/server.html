<html>
<head>
    <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase.js"></script>
    <script src="mathTournament.js"></script>
    <script>
        window.onload =  function(){
            let onInitPlayer = function(numPlayer, player){
                let header =  document.getElementById("header");
                header.innerHTML += player.nickname +"("+numPlayer+") Listo<br/>";
            }

            let onGameEnds= function(playerWinner, numPlayer){
                alert("Ganador Player "+numPlayer+":"+playerWinner.nickname);
            }

            let onTurnEnds= function(playerWinner, numPlayer){
                if(playerWinner != null){
                    alert("Correcto Player "+numPlayer+":"+playerWinner.nickname);
                }else{
                    alert("Los dos se equivocaron");
                }
            }

            let onPlayerDisconnect= function(playerWinner, numPlayer){
                alert("El jugador "+numPlayer+" se ha desconectado");
            }

            let onPlayersReady= function(playerWinner, numPlayer){
                alert("Ambos jugadores est√°n listos");
                server.generateQuestion();
            }

            let afterGenerateQuestion= function(data){
                document.getElementById("operation").innerText = 
                    data.operand1+ " "+data.opedator+" "+ data.operand2 +"="+data.correctAnswer;
            }

            let functions = [
                onInitPlayer,
                onGameEnds,
                onTurnEnds,
                onPlayerDisconnect,
                onPlayersReady,
                afterGenerateQuestion
            ];

            let server = new Server(functions, 1);
            server.start();
            document.getElementById("header").innerHTML = server.getIdGame()+"<br/>";
        }
    </script>
</head>
<body>
    <div id="header" ></div><br/>
    <div id="operation" ></div>
    <div id="resultado" ></div>
</body>
</html>

