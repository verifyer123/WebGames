/*!
 * phaser-spine - version 3.0.9
 * Spine plugin for Phaser.io!
 *
 * OrangeGames
 * Build at 10-07-2017
 * Released under MIT License
 */


/******************************************************************************
 * Spine Runtimes Software License
 * Version 2.3
 *
 * Copyright (c) 2013-2015, Esoteric Software
 * All rights reserved.
 *
 * You are granted a perpetual, non-exclusive, non-sublicensable and
 * non-transferable license to use, install, execute and perform the Spine
 * Runtimes Software (the "Software") and derivative works solely for personal
 * or internal use. Without the written permission of Esoteric Software (see
 * Section 2 of the Spine Software License Agreement), you may not (a) modify,
 * translate, adapt or otherwise create derivative works, improvements of the
 * Software or develop new applications using the Software or (b) remove,
 * delete, alter or obscure any trademarks or any copyright, trademark, patent
 * or other intellectual property or proprietary rights notices on or in the
 * Software, including any copy thereof. Redistributions in binary or source
 * form must include this license and terms.
 *
 * THIS SOFTWARE IS PROVIDED BY ESOTERIC SOFTWARE "AS IS" AND ANY EXPRESS OR
 * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO
 * EVENT SHALL ESOTERIC SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
 * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
 * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
 * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *****************************************************************************/
var spine={radDeg:180/Math.PI,degRad:Math.PI/180,Float32Array:"undefined"==typeof Float32Array?Array:Float32Array,Uint32Array:"undefined"==typeof Uint32Array?Array:Uint32Array,Uint16Array:"undefined"==typeof Uint16Array?Array:Uint16Array};spine.temp=new spine.Float32Array(2),spine.BoneData=function(t,e){this.name=t,this.parent=e},spine.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0},spine.BlendMode={normal:0,additive:1,multiply:2,screen:3},spine.SlotData=function(t,e){this.name=t,this.boneData=e},spine.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,blendMode:spine.BlendMode.normal},spine.IkConstraintData=function(t){this.name=t,this.bones=[]},spine.IkConstraintData.prototype={target:null,bendDirection:1,mix:1},spine.TransformConstraintData=function(t){this.name=t},spine.TransformConstraintData.prototype={bone:null,target:null,translateMix:1,x:0,y:0},spine.Bone=function(t,e,n){this.data=t,this.skeleton=e,this.parent=n,this.setToSetupPose()},spine.Bone.yDown=!1,spine.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,a:0,b:0,worldX:0,c:0,d:0,worldY:0,worldSignX:1,worldSignY:1,update:function(){this.updateWorldTransform(this.x,this.y,this.rotation,this.scaleX,this.scaleY)},updateWorldTransformWith:function(){this.updateWorldTransform(this.x,this.y,this.rotation,this.scaleX,this.scaleY)},updateWorldTransform:function(t,e,n,i,a){this.appliedRotation=n,this.appliedScaleX=i,this.appliedScaleY=a,n*=spine.degRad;var r=Math.cos(n),s=Math.sin(n),o=r*i,h=-s*a,l=s*i,p=r*a,f=this.parent;if(!f){var u=this.skeleton;return u.flipX&&(t=-t,o=-o,h=-h),u.flipY!=spine.Bone.yDown&&(e=-e,l=-l,p=-p),this.a=o,this.b=h,this.c=l,this.d=p,this.worldX=t,this.worldY=e,this.worldSignX=i<0?-1:1,void(this.worldSignY=a<0?-1:1)}var d=f.a,c=f.b,g=f.c,m=f.d;if(this.worldX=d*t+c*e+f.worldX,this.worldY=g*t+m*e+f.worldY,this.worldSignX=f.worldSignX*(i<0?-1:1),this.worldSignY=f.worldSignY*(a<0?-1:1),this.data.inheritRotation&&this.data.inheritScale)this.a=d*o+c*l,this.b=d*h+c*p,this.c=g*o+m*l,this.d=g*h+m*p;else{if(this.data.inheritRotation){d=1,c=0,g=0,m=1;do{n=f.appliedRotation*spine.degRad;var v=d*(r=Math.cos(n))+c*(s=Math.sin(n));if(c=d*-s+c*r,d=v,v=g*r+m*s,m=g*-s+m*r,g=v,!f.data.inheritRotation)break;f=f.parent}while(f);this.a=d*o+c*l,this.b=d*h+c*p,this.c=g*o+m*l,this.d=g*h+m*p}else if(this.data.inheritScale){d=1,c=0,g=0,m=1;do{n=f.appliedRotation*spine.degRad,r=Math.cos(n),s=Math.sin(n);var y=f.appliedScaleX,w=f.appliedScaleY,b=r*y,x=-s*w,A=s*y,S=r*w;v=d*b+c*A;if(c=d*x+c*S,d=v,v=g*b+m*A,m=g*x+m*S,g=v,y<0&&(n=-n),v=d*(r=Math.cos(-n))+c*(s=Math.sin(-n)),c=d*-s+c*r,d=v,v=g*r+m*s,m=g*-s+m*r,g=v,!f.data.inheritScale)break;f=f.parent}while(f);this.a=d*o+c*l,this.b=d*h+c*p,this.c=g*o+m*l,this.d=g*h+m*p}else this.a=o,this.b=h,this.c=l,this.d=p;this.skeleton.flipX&&(this.a=-this.a,this.b=-this.b),this.skeleton.flipY!=spine.Bone.yDown&&(this.c=-this.c,this.d=-this.d)}},setToSetupPose:function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY},getWorldRotationX:function(){return Math.atan2(this.c,this.a)*spine.radDeg},getWorldRotationY:function(){return Math.atan2(this.d,this.b)*spine.radDeg},getWorldScaleX:function(){return Math.sqrt(this.a*this.a+this.b*this.b)*this.worldSignX},getWorldScaleY:function(){return Math.sqrt(this.c*this.c+this.d*this.d)*this.worldSignY},worldToLocal:function(t){var e=t[0]-this.worldX,n=t[1]-this.worldY,i=this.a,a=this.b,r=this.c,s=this.d,o=1/(i*s-a*r);return t[0]=e*s*o-n*a*o,t[1]=n*i*o-e*r*o,t},localToWorld:function(t){var e=t[0],n=t[1];return t[0]=e*this.a+n*this.b+this.worldX,t[1]=e*this.c+n*this.d+this.worldY,t}},spine.Slot=function(t,e){this.data=t,this.bone=e,this.attachmentVertices=new spine.Float32Array,this.setToSetupPose()},spine.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(t){this.attachment!=t&&(this.attachment=t,this._attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},setAttachmentTime:function(t){this._attachmentTime=this.bone.skeleton.time-t},getAttachmentTime:function(){return this.bone.skeleton.time-this._attachmentTime},setToSetupPose:function(){var t=this.data;if(this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,t.attachmentName){for(var e=this.bone.skeleton.data.slots,n=0,i=e.length;n<i;n++)if(e[n]==t){this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachmentBySlotIndex(n,t.attachmentName));break}}else this.setAttachment(null)}},spine.IkConstraint=function(t,e){this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.bones=[];for(var n=0,i=t.bones.length;n<i;n++)this.bones[n]=e.findBone(t.bones[n].name);this.target=e.findBone(t.target.name)},spine.IkConstraint.prototype={apply:function(){this.update()},update:function(){var t=this.target,e=this.bones;switch(e.length){case 1:spine.IkConstraint.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:spine.IkConstraint.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix)}}},spine.IkConstraint.apply1=function(t,e,n,i){var a=t.parent?t.parent.getWorldRotationX():0,r=t.rotation,s=Math.atan2(n-t.worldY,e-t.worldX)*spine.radDeg-a;t.worldSignX!=t.worldSignY!=(t.skeleton.flipX!=(t.skeleton.flipY!=spine.Bone.yDown))&&(s=360-s),s>180?s-=360:s<-180&&(s+=360),t.updateWorldTransform(t.x,t.y,r+(s-r)*i,t.appliedScaleX,t.appliedScaleY)},spine.IkConstraint.apply2=function(t,e,n,i,a,r){if(0!=r){var s,o,h,l=t.x,p=t.y,f=t.appliedScaleX,u=t.appliedScaleY;f<0?(f=-f,s=180,h=-1):(s=0,h=1),u<0&&(u=-u,h=-h);var d=e.x,c=e.y,g=e.appliedScaleX,m=Math.abs(f-u)<=1e-4;m||0==c||(e.worldX=t.a*d+t.worldX,e.worldY=t.c*d+t.worldY,c=0),g<0?(g=-g,o=180):o=0;var v,y,w,b,x=t.parent;if(x){var A=x.a,S=x.b,k=x.c,T=1/(A*(V=x.d)-S*k),C=x.worldX,M=x.worldY;v=((q=n-C)*V-(G=i-M)*S)*T-l,y=(G*A-q*k)*T-p,w=((q=e.worldX-C)*V-(G=e.worldY-M)*S)*T-l,b=(G*A-q*k)*T-p}else v=n-l,y=i-p,w=e.worldX-l,b=e.worldY-p;var P,O,I=Math.sqrt(w*w+b*b),X=e.data.length*g;t:if(m){var F=(v*v+y*y-I*I-(X*=f)*X)/(2*I*X);F<-1?F=-1:F>1&&(F=1),O=Math.acos(F)*a;A=I+X*F;var Y=X*Math.sin(O);P=Math.atan2(y*A-v*Y,v*A+y*Y)}else{A=f*X,S=u*X;var V,D=Math.atan2(y,v),U=A*A,W=S*S,B=v*v+y*y,E=W*(I*I)+U*B-U*W,R=-2*W*I,L=W-U;if((V=R*R-4*L*E)>=0){var N=Math.sqrt(V);R<0&&(N=-N);var _=(N=-(R+N)/2)/L,H=E/N,j=Math.abs(_)<Math.abs(H)?_:H;if(j*j<=B){var G=Math.sqrt(B-j*j)*a;P=D-Math.atan2(G,j),O=Math.atan2(G/u,(j-I)/f);break t}}var q,J=0,K=Number.MAX_VALUE,$=0,z=0,Q=0,Z=0,tt=0,et=0,nt=(q=I+A)*q;nt>Z&&(Q=0,Z=nt,tt=q),(nt=(q=I-A)*q)<K&&(J=Math.PI,K=nt,$=q);var it=Math.acos(-A*I/(U-W));(nt=(q=A*Math.cos(it)+I)*q+(G=S*Math.sin(it))*G)<K&&(J=it,K=nt,$=q,z=G),nt>Z&&(Q=it,Z=nt,tt=q,et=G),B<=(K+Z)/2?(P=D-Math.atan2(z*a,$),O=J*a):(P=D-Math.atan2(et*a,tt),O=Q*a)}var at=Math.atan2(c,d)*h;P=(P-at)*spine.radDeg+s,O=(O+at)*spine.radDeg*h+o,P>180?P-=360:P<-180&&(P+=360),O>180?O-=360:O<-180&&(O+=360);var rt=t.rotation;t.updateWorldTransform(l,p,rt+(P-rt)*r,t.appliedScaleX,t.appliedScaleY),rt=e.rotation,e.updateWorldTransform(d,c,rt+(O-rt)*r,e.appliedScaleX,e.appliedScaleY)}},spine.TransformConstraint=function(t,e){this.data=t,this.translateMix=t.translateMix,this.x=t.x,this.y=t.y,this.bone=e.findBone(t.bone.name),this.target=e.findBone(t.target.name)},spine.TransformConstraint.prototype={apply:function(){this.update()},update:function(){var t=this.translateMix;if(t>0){var e=spine.temp;e[0]=x,e[1]=y,this.target.localToWorld(e);var n=this.bone;n.worldX+=(e[0]-n.worldX)*t,n.worldY+=(e[1]-n.worldY)*t}}},spine.Skin=function(t){this.name=t,this.attachments={}},spine.Skin.prototype={addAttachment:function(t,e,n){this.attachments[t+":"+e]=n},getAttachment:function(t,e){return this.attachments[t+":"+e]},_attachAll:function(t,e){for(var n in e.attachments){var i=n.indexOf(":"),a=parseInt(n.substring(0,i)),r=n.substring(i+1),s=t.slots[a];if(s.attachment&&s.attachment.name==r){var o=this.getAttachment(a,r);o&&s.setAttachment(o)}}}},spine.Animation=function(t,e,n){this.name=t,this.timelines=e,this.duration=n},spine.Animation.prototype={apply:function(t,e,n,i,a){i&&0!=this.duration&&(n%=this.duration,e>0&&(e%=this.duration));for(var r=this.timelines,s=0,o=r.length;s<o;s++)r[s].apply(t,e,n,a,1)},mix:function(t,e,n,i,a,r){i&&0!=this.duration&&(n%=this.duration,e>0&&(e%=this.duration));for(var s=this.timelines,o=0,h=s.length;o<h;o++)s[o].apply(t,e,n,a,r)}},spine.Animation.binarySearch=function(t,e,n){var i=0,a=Math.floor(t.length/n)-2;if(!a)return n;for(var r=a>>>1;;){if(t[(r+1)*n]<=e?i=r+1:a=r,i==a)return(i+1)*n;r=i+a>>>1}},spine.Animation.binarySearch1=function(t,e){var n=0,i=t.length-2;if(!i)return 1;for(var a=i>>>1;;){if(t[a+1]<=e?n=a+1:i=a,n==i)return n+1;a=n+i>>>1}},spine.Animation.linearSearch=function(t,e,n){for(var i=0,a=t.length-n;i<=a;i+=n)if(t[i]>e)return i;return-1},spine.Curves=function(t){var e=19*(t-1);this.curves=new spine.Float32Array(e),this.curves.length=e},spine.Curves.prototype={setLinear:function(t){this.curves[19*t]=0},setStepped:function(t){this.curves[19*t]=1},setCurve:function(t,e,n,i,a){var r=.1*.1*.1,s=6*r,o=2*-e+i,h=2*-n+a,l=3*(e-i)+1,p=3*(n-a)+1,f=e*(3*.1)+o*(.1*.1*3)+l*r,u=n*(3*.1)+h*(.1*.1*3)+p*r,d=o*(.1*.1*6)+l*s,c=h*(.1*.1*6)+p*s,g=l*s,m=p*s,v=19*t,y=this.curves;y[v++]=2;for(var w=f,b=u,x=v+19-1;v<x;v+=2)y[v]=w,y[v+1]=b,f+=d,u+=c,d+=g,c+=m,w+=f,b+=u},getCurvePercent:function(t,e){e=e<0?0:e>1?1:e;var n=this.curves,i=19*t,a=n[i];if(0===a)return e;if(1==a)return 0;for(var r=0,s=++i,o=i+19-1;i<o;i+=2){var h,l;if((r=n[i])>=e)return i==s?(h=0,l=0):(h=n[i-2],l=n[i-1]),l+(n[i+1]-l)*(e-h)/(r-h)}var p=n[i-1];return p+(1-p)*(e-r)/(1-r)}},spine.RotateTimeline=function(t){this.curves=new spine.Curves(t),this.frames=new spine.Float32Array(2*t),this.frames.length=2*t},spine.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,n){t*=2,this.frames[t]=e,this.frames[t+1]=n},apply:function(t,e,n,i,a){var r=this.frames;if(!(n<r[0])){var s=t.bones[this.boneIndex];if(n>=r[r.length-2]){for(var o=s.data.rotation+r[r.length-1]-s.rotation;o>180;)o-=360;for(;o<-180;)o+=360;s.rotation+=o*a}else{var h=spine.Animation.binarySearch(r,n,2),l=r[h-1],p=r[h],f=1-(n-p)/(r[h-2]-p);f=this.curves.getCurvePercent(h/2-1,f);for(o=r[h+1]-l;o>180;)o-=360;for(;o<-180;)o+=360;for(o=s.data.rotation+(l+o*f)-s.rotation;o>180;)o-=360;for(;o<-180;)o+=360;s.rotation+=o*a}}}},spine.TranslateTimeline=function(t){this.curves=new spine.Curves(t),this.frames=new spine.Float32Array(3*t),this.frames.length=3*t},spine.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,n,i){t*=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=i},apply:function(t,e,n,i,a){var r=this.frames;if(!(n<r[0])){var s=t.bones[this.boneIndex];if(n>=r[r.length-3])return s.x+=(s.data.x+r[r.length-2]-s.x)*a,void(s.y+=(s.data.y+r[r.length-1]-s.y)*a);var o=spine.Animation.binarySearch(r,n,3),h=r[o-2],l=r[o-1],p=r[o],f=1-(n-p)/(r[o+-3]-p);f=this.curves.getCurvePercent(o/3-1,f),s.x+=(s.data.x+h+(r[o+1]-h)*f-s.x)*a,s.y+=(s.data.y+l+(r[o+2]-l)*f-s.y)*a}}},spine.ScaleTimeline=function(t){this.curves=new spine.Curves(t),this.frames=new spine.Float32Array(3*t),this.frames.length=3*t},spine.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,n,i){t*=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=i},apply:function(t,e,n,i,a){var r=this.frames;if(!(n<r[0])){var s=t.bones[this.boneIndex];if(n>=r[r.length-3])return s.scaleX+=(s.data.scaleX*r[r.length-2]-s.scaleX)*a,void(s.scaleY+=(s.data.scaleY*r[r.length-1]-s.scaleY)*a);var o=spine.Animation.binarySearch(r,n,3),h=r[o-2],l=r[o-1],p=r[o],f=1-(n-p)/(r[o+-3]-p);f=this.curves.getCurvePercent(o/3-1,f),s.scaleX+=(s.data.scaleX*(h+(r[o+1]-h)*f)-s.scaleX)*a,s.scaleY+=(s.data.scaleY*(l+(r[o+2]-l)*f)-s.scaleY)*a}}},spine.ColorTimeline=function(t){this.curves=new spine.Curves(t),this.frames=new spine.Float32Array(5*t),this.frames.length=5*t},spine.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(t,e,n,i,a,r){t*=5,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=i,this.frames[t+3]=a,this.frames[t+4]=r},apply:function(t,e,n,i,a){var r=this.frames;if(!(n<r[0])){var s,o,h,l;if(n>=r[r.length-5]){var p=r.length-1;s=r[p-3],o=r[p-2],h=r[p-1],l=r[p]}else{var f=spine.Animation.binarySearch(r,n,5),u=r[f-4],d=r[f-3],c=r[f-2],g=r[f-1],m=r[f],v=1-(n-m)/(r[f-5]-m);v=this.curves.getCurvePercent(f/5-1,v),s=u+(r[f+1]-u)*v,o=d+(r[f+2]-d)*v,h=c+(r[f+3]-c)*v,l=g+(r[f+4]-g)*v}var y=t.slots[this.slotIndex];a<1?(y.r+=(s-y.r)*a,y.g+=(o-y.g)*a,y.b+=(h-y.b)*a,y.a+=(l-y.a)*a):(y.r=s,y.g=o,y.b=h,y.a=l)}}},spine.AttachmentTimeline=function(t){this.curves=new spine.Curves(t),this.frames=new spine.Float32Array(t),this.frames.length=t,this.attachmentNames=[],this.attachmentNames.length=t},spine.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n},apply:function(t,e,n,i,a){var r=this.frames;if(n<r[0])e>n&&this.apply(t,e,Number.MAX_VALUE,null,0);else{e>n&&(e=-1);var s=n>=r[r.length-1]?r.length-1:spine.Animation.binarySearch1(r,n)-1;if(!(r[s]<e)){var o=this.attachmentNames[s];t.slots[this.slotIndex].setAttachment(o?t.getAttachmentBySlotIndex(this.slotIndex,o):null)}}}},spine.EventTimeline=function(t){this.frames=new spine.Float32Array(t),this.frames.length=t,this.events=[],this.events.length=t},spine.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(t,e){this.frames[t]=e.time,this.events[t]=e},apply:function(t,e,n,i,a){if(i){var r=this.frames,s=r.length;if(e>n)this.apply(t,e,Number.MAX_VALUE,i,a),e=-1;else if(e>=r[s-1])return;if(!(n<r[0])){var o;if(e<r[0])o=0;else for(var h=r[o=spine.Animation.binarySearch1(r,e)];o>0&&r[o-1]==h;)o--;for(var l=this.events;o<s&&n>=r[o];o++)i[i.length]=l[o]}}}},spine.DrawOrderTimeline=function(t){this.frames=new spine.Float32Array(t),this.frames.length=t,this.drawOrders=[],this.drawOrders.length=t},spine.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n},apply:function(t,e,n,i,a){var r=this.frames;if(!(n<r[0])){var s;s=n>=r[r.length-1]?r.length-1:spine.Animation.binarySearch1(r,n)-1;var o=t.drawOrder,h=t.slots,l=this.drawOrders[s];if(l)for(p=0,f=l.length;p<f;p++)o[p]=t.slots[l[p]];else for(var p=0,f=h.length;p<f;p++)o[p]=h[p]}}},spine.FfdTimeline=function(t){this.curves=new spine.Curves(t),this.frames=new spine.Float32Array(t),this.frames.length=t,this.frameVertices=[],this.frameVertices.length=t},spine.FfdTimeline.prototype={slotIndex:0,attachment:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,n){this.frames[t]=e,this.frameVertices[t]=n},apply:function(t,e,n,i,a){var r=t.slots[this.slotIndex],s=r.attachment;if(s&&(s==this.attachment||s.inheritFFD&&s.parentMesh==this.attachment)){var o=this.frames;if(!(n<o[0])){var h=this.frameVertices,l=h[0].length,p=r.attachmentVertices;if(p.length!=l&&(r.attachmentVertices=p=new spine.Float32Array(l),a=1),n>=o[o.length-1]){var f=h[o.length-1];if(a<1)for(var u=0;u<l;u++)p[u]+=(f[u]-p[u])*a;else for(u=0;u<l;u++)p[u]=f[u]}else{var d=spine.Animation.binarySearch1(o,n),c=o[d],g=1-(n-c)/(o[d-1]-c);g=this.curves.getCurvePercent(d-1,g<0?0:g>1?1:g);var m=h[d-1],v=h[d];if(a<1)for(u=0;u<l;u++){var y=m[u];p[u]+=(y+(v[u]-y)*g-p[u])*a}else for(u=0;u<l;u++){y=m[u];p[u]=y+(v[u]-y)*g}}}}}},spine.IkConstraintTimeline=function(t){this.curves=new spine.Curves(t),this.frames=new spine.Float32Array(3*t),this.frames.length=3*t},spine.IkConstraintTimeline.prototype={ikConstraintIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,n,i){t*=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=i},apply:function(t,e,n,i,a){var r=this.frames;if(!(n<r[0])){var s=t.ikConstraints[this.ikConstraintIndex];if(n>=r[r.length-3])return s.mix+=(r[r.length-2]-s.mix)*a,void(s.bendDirection=r[r.length-1]);var o=spine.Animation.binarySearch(r,n,3),h=r[o+-2],l=r[o],p=1-(n-l)/(r[o+-3]-l);p=this.curves.getCurvePercent(o/3-1,p);var f=h+(r[o+1]-h)*p;s.mix+=(f-s.mix)*a,s.bendDirection=r[o+-1]}}},spine.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[],this.ikConstraints=[],this.transformConstraints=[]},spine.SkeletonData.prototype={name:null,defaultSkin:null,width:0,height:0,version:null,hash:null,findBone:function(t){for(var e=this.bones,n=0,i=e.length;n<i;n++)if(e[n].name==t)return e[n];return null},findBoneIndex:function(t){for(var e=this.bones,n=0,i=e.length;n<i;n++)if(e[n].name==t)return n;return-1},findSlot:function(t){for(var e=this.slots,n=0,i=e.length;n<i;n++)if(e[n].name==t)return slot[n];return null},findSlotIndex:function(t){for(var e=this.slots,n=0,i=e.length;n<i;n++)if(e[n].name==t)return n;return-1},findSkin:function(t){for(var e=this.skins,n=0,i=e.length;n<i;n++)if(e[n].name==t)return e[n];return null},findEvent:function(t){for(var e=this.events,n=0,i=e.length;n<i;n++)if(e[n].name==t)return e[n];return null},findAnimation:function(t){for(var e=this.animations,n=0,i=e.length;n<i;n++)if(e[n].name==t)return e[n];return null},findIkConstraint:function(t){for(var e=this.ikConstraints,n=0,i=e.length;n<i;n++)if(e[n].name==t)return e[n];return null},findTransformConstraints:function(t){for(var e=this.transformConstraints,n=0,i=e.length;n<i;n++)if(e[n].name==t)return e[n];return null}},spine.Skeleton=function(t){this.data=t,this.bones=[];for(var e=0,n=t.bones.length;e<n;e++){var i=t.bones[e],a=i.parent?this.bones[t.bones.indexOf(i.parent)]:null;this.bones[e]=new spine.Bone(i,this,a)}this.slots=[],this.drawOrder=[];for(e=0,n=t.slots.length;e<n;e++){var r=t.slots[e],s=this.bones[t.bones.indexOf(r.boneData)],o=new spine.Slot(r,s);this.slots[e]=o,this.drawOrder[e]=o}this.ikConstraints=[];for(e=0,n=t.ikConstraints.length;e<n;e++)this.ikConstraints[e]=new spine.IkConstraint(t.ikConstraints[e],this);this.transformConstraints=[];for(e=0,n=t.transformConstraints.length;e<n;e++)this.transformConstraints[e]=new spine.TransformConstraint(t.transformConstraints[e],this);this.cache=[],this.updateCache()},spine.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateCache:function(){var t=this.bones,e=this.cache,n=this.ikConstraints,i=this.transformConstraints,a=n.length,r=i.length;e.length=0;for(var s=0,o=t.length;s<o;s++){var h=t[s];e[e.length]=h;for(var l=0;l<a;l++){var p=n[l];if(h==p.bones[p.bones.length-1]){e[e.length]=p;break}}}for(s=0;s<r;s++){var f=i[s];for(l=e.length-1;l>=0;l--){var u=e[l];if(u==f.bone||u==f.target){e.splice(l+1,0,f);break}}}},updateWorldTransform:function(){for(var t=this.cache,e=0,n=t.length;e<n;e++)t[e].update()},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].setToSetupPose();var i=this.ikConstraints;for(e=0,n=i.length;e<n;e++){(r=i[e]).bendDirection=r.data.bendDirection,r.mix=r.data.mix}var a=this.transformConstraints;for(e=0,n=a.length;e<n;e++){var r;(r=a[e]).translateMix=r.data.translateMix,r.x=r.data.x,r.y=r.data.y}},setSlotsToSetupPose:function(){for(var t=this.slots,e=this.drawOrder,n=0,i=t.length;n<i;n++)e[n]=t[n],t[n].setToSetupPose(n)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(t){for(var e=this.bones,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return e[n];return null},findBoneIndex:function(t){for(var e=this.bones,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return n;return-1},findSlot:function(t){for(var e=this.slots,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return e[n];return null},findSlotIndex:function(t){for(var e=this.slots,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return n;return-1},setSkinByName:function(t){var e=this.data.findSkin(t);if(!e)throw"Skin not found: "+t;this.setSkin(e)},setSkin:function(t){if(t)if(this.skin)t._attachAll(this,this.skin);else for(var e=this.slots,n=0,i=e.length;n<i;n++){var a=e[n],r=a.data.attachmentName;if(r){var s=t.getAttachment(n,r);s&&a.setAttachment(s)}}this.skin=t},getAttachmentBySlotName:function(t,e){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(t),e)},getAttachmentBySlotIndex:function(t,e){if(this.skin){var n=this.skin.getAttachment(t,e);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},setAttachment:function(t,e){for(var n=this.slots,i=0,a=n.length;i<a;i++){var r=n[i];if(r.data.name==t){var s=null;if(e&&!(s=this.getAttachmentBySlotIndex(i,e)))throw"Attachment not found: "+e+", for slot: "+t;return void r.setAttachment(s)}}throw"Slot not found: "+t},findIkConstraint:function(t){for(var e=this.ikConstraints,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return e[n];return null},findTransformConstraint:function(t){for(var e=this.transformConstraints,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return e[n];return null},update:function(t){this.time+=t}},spine.EventData=function(t){this.name=t},spine.EventData.prototype={intValue:0,floatValue:0,stringValue:null},spine.Event=function(t,e){this.time=t,this.data=e},spine.Event.prototype={intValue:0,floatValue:0,stringValue:null},spine.AttachmentType={region:0,boundingbox:1,mesh:2,weightedmesh:3,linkedmesh:4,weightedlinkedmesh:5},spine.RegionAttachment=function(t){this.name=t,this.offset=new spine.Float32Array(8),this.offset.length=8,this.uvs=new spine.Float32Array(8),this.uvs.length=8},spine.RegionAttachment.prototype={type:spine.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(t,e,n,i,a){var r=this.uvs;a?(r[2]=t,r[3]=i,r[4]=t,r[5]=e,r[6]=n,r[7]=e,r[0]=n,r[1]=i):(r[0]=t,r[1]=i,r[2]=t,r[3]=e,r[4]=n,r[5]=e,r[6]=n,r[7]=i)},updateOffset:function(){var t=this.width/this.regionOriginalWidth*this.scaleX,e=this.height/this.regionOriginalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.regionOffsetX*t,i=-this.height/2*this.scaleY+this.regionOffsetY*e,a=n+this.regionWidth*t,r=i+this.regionHeight*e,s=this.rotation*spine.degRad,o=Math.cos(s),h=Math.sin(s),l=n*o+this.x,p=n*h,f=i*o+this.y,u=i*h,d=a*o+this.x,c=a*h,g=r*o+this.y,m=r*h,v=this.offset;v[0]=l-u,v[1]=f+p,v[2]=l-m,v[3]=g+p,v[4]=d-m,v[5]=g+c,v[6]=d-u,v[7]=f+c},computeVertices:function(t,e,n,i){t+=n.worldX,e+=n.worldY;var a=n.a,r=n.b,s=n.c,o=n.d,h=this.offset;i[0]=h[0]*a+h[1]*r+t,i[1]=h[0]*s+h[1]*o+e,i[2]=h[2]*a+h[3]*r+t,i[3]=h[2]*s+h[3]*o+e,i[4]=h[4]*a+h[5]*r+t,i[5]=h[4]*s+h[5]*o+e,i[6]=h[6]*a+h[7]*r+t,i[7]=h[6]*s+h[7]*o+e}},spine.MeshAttachment=function(t){this.name=t},spine.MeshAttachment.prototype={type:spine.AttachmentType.mesh,vertices:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,inheritFFD:!0,parentMesh:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var t=this.regionU2-this.regionU,e=this.regionV2-this.regionV,n=this.regionUVs.length;if(this.uvs&&this.uvs.length==n||(this.uvs=new spine.Float32Array(n)),this.regionRotate)for(var i=0;i<n;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i+1]*t,this.uvs[i+1]=this.regionV+e-this.regionUVs[i]*e;else for(i=0;i<n;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i]*t,this.uvs[i+1]=this.regionV+this.regionUVs[i+1]*e},computeWorldVertices:function(t,e,n,i){var a=n.bone;t+=a.worldX,e+=a.worldY;var r=a.a,s=a.b,o=a.c,h=a.d,l=this.vertices,p=l.length;n.attachmentVertices.length==p&&(l=n.attachmentVertices);for(var f=0;f<p;f+=2){var u=l[f],d=l[f+1];i[f]=u*r+d*s+t,i[f+1]=u*o+d*h+e}},setParentMesh:function(t){this.parentMesh=t,t&&(this.vertices=t.vertices,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.edges=t.edges,this.width=t.width,this.height=t.height)}},spine.WeightedMeshAttachment=function(t){this.name=t},spine.WeightedMeshAttachment.prototype={type:spine.AttachmentType.weightedmesh,bones:null,weights:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,inheritFFD:!0,parentMesh:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(t,e,n,i,a){var r=this.regionU2-this.regionU,s=this.regionV2-this.regionV,o=this.regionUVs.length;if(this.uvs&&this.uvs.length==o||(this.uvs=new spine.Float32Array(o)),this.regionRotate)for(var h=0;h<o;h+=2)this.uvs[h]=this.regionU+this.regionUVs[h+1]*r,this.uvs[h+1]=this.regionV+s-this.regionUVs[h]*s;else for(h=0;h<o;h+=2)this.uvs[h]=this.regionU+this.regionUVs[h]*r,this.uvs[h+1]=this.regionV+this.regionUVs[h+1]*s},computeWorldVertices:function(t,e,n,i){var a,r,s,o,h,l,p,f=n.bone.skeleton.bones,u=this.weights,d=this.bones,c=0,g=0,m=0,v=0,y=d.length;if(n.attachmentVertices.length)for(var w=n.attachmentVertices;g<y;c+=2){for(r=0,s=0,a=d[g++]+g;g<a;g++,m+=3,v+=2)o=f[d[g]],h=u[m]+w[v],l=u[m+1]+w[v+1],p=u[m+2],r+=(h*o.a+l*o.b+o.worldX)*p,s+=(h*o.c+l*o.d+o.worldY)*p;i[c]=r+t,i[c+1]=s+e}else for(;g<y;c+=2){for(r=0,s=0,a=d[g++]+g;g<a;g++,m+=3)o=f[d[g]],h=u[m],l=u[m+1],p=u[m+2],r+=(h*o.a+l*o.b+o.worldX)*p,s+=(h*o.c+l*o.d+o.worldY)*p;i[c]=r+t,i[c+1]=s+e}},setParentMesh:function(t){this.parentMesh=t,t&&(this.bones=t.bones,this.weights=t.weights,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.edges=t.edges,this.width=t.width,this.height=t.height)}},spine.BoundingBoxAttachment=function(t){this.name=t,this.vertices=new spine.Float32Array},spine.BoundingBoxAttachment.prototype={type:spine.AttachmentType.boundingbox,computeWorldVertices:function(t,e,n,i){t+=n.worldX,e+=n.worldY;for(var a=n.a,r=n.b,s=n.c,o=n.d,h=this.vertices,l=0,p=h.length;l<p;l+=2){var f=h[l],u=h[l+1];i[l]=f*a+u*r+t,i[l+1]=f*s+u*o+e}}},spine.AnimationStateData=function(t){this.skeletonData=t,this.animationToMixTime={}},spine.AnimationStateData.prototype={defaultMix:0,setMixByName:function(t,e,n){var i=this.skeletonData.findAnimation(t);if(!i)throw"Animation not found: "+t;var a=this.skeletonData.findAnimation(e);if(!a)throw"Animation not found: "+e;this.setMix(i,a,n)},setMix:function(t,e,n){this.animationToMixTime[t.name+":"+e.name]=n},getMix:function(t,e){var n=t.name+":"+e.name;return this.animationToMixTime.hasOwnProperty(n)?this.animationToMixTime[n]:this.defaultMix}},spine.TrackEntry=function(){},spine.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,mix:1,onStart:null,onEnd:null,onComplete:null,onEvent:null},spine.AnimationState=function(t){this.data=t,this.tracks=[],this.events=[]},spine.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(t){t*=this.timeScale;for(var e=0;e<this.tracks.length;e++){var n=this.tracks[e];if(n){if(n.time+=t*n.timeScale,n.previous){var i=t*n.previous.timeScale;n.previous.time+=i,n.mixTime+=i}var a=n.next;a?(a.time=n.lastTime-a.delay,a.time>=0&&this.setCurrent(e,a)):!n.loop&&n.lastTime>=n.endTime&&this.clearTrack(e)}}},apply:function(t){for(var e=0;e<this.tracks.length;e++){var n=this.tracks[e];if(n){this.events.length=0;var i=n.time,a=n.lastTime,r=n.endTime,s=n.loop;!s&&i>r&&(i=r);var o=n.previous;if(o){var h=o.time;!o.loop&&h>o.endTime&&(h=o.endTime),o.animation.apply(t,h,h,o.loop,null);var l=n.mixTime/n.mixDuration*n.mix;l>=1&&(l=1,n.previous=null),n.animation.mix(t,n.lastTime,i,s,this.events,l)}else 1==n.mix?n.animation.apply(t,n.lastTime,i,s,this.events):n.animation.mix(t,n.lastTime,i,s,this.events,n.mix);for(var p=0,f=this.events.length;p<f;p++){var u=this.events[p];n.onEvent&&n.onEvent(e,u),this.onEvent&&this.onEvent(e,u)}if(s?a%r>i%r:a<r&&i>=r){var d=Math.floor(i/r);n.onComplete&&n.onComplete(e,d),this.onComplete&&this.onComplete(e,d)}n.lastTime=n.time}}},clearTracks:function(){for(var t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0},clearTrack:function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];e&&(e.onEnd&&e.onEnd(t),this.onEnd&&this.onEnd(t),this.tracks[t]=null)}},_expandToIndex:function(t){if(t<this.tracks.length)return this.tracks[t];for(;t>=this.tracks.length;)this.tracks[this.tracks.length]=null;return null},setCurrent:function(t,e){var n=this._expandToIndex(t);if(n){var i=n.previous;n.previous=null,n.onEnd&&n.onEnd(t),this.onEnd&&this.onEnd(t),e.mixDuration=this.data.getMix(n.animation,e.animation),e.mixDuration>0&&(e.mixTime=0,i&&n.mixTime/n.mixDuration<.5?e.previous=i:e.previous=n)}this.tracks[t]=e,e.onStart&&e.onStart(t),this.onStart&&this.onStart(t)},setAnimationByName:function(t,e,n){var i=this.data.skeletonData.findAnimation(e);if(!i)throw"Animation not found: "+e;return this.setAnimation(t,i,n)},setAnimation:function(t,e,n){var i=new spine.TrackEntry;return i.animation=e,i.loop=n,i.endTime=e.duration,this.setCurrent(t,i),i},addAnimationByName:function(t,e,n,i){var a=this.data.skeletonData.findAnimation(e);if(!a)throw"Animation not found: "+e;return this.addAnimation(t,a,n,i)},addAnimation:function(t,e,n,i){var a=new spine.TrackEntry;a.animation=e,a.loop=n,a.endTime=e.duration;var r=this._expandToIndex(t);if(r){for(;r.next;)r=r.next;r.next=a}else this.tracks[t]=a;return i<=0&&(r?i+=r.endTime-this.data.getMix(r.animation,e):i=0),a.delay=i,a},getCurrent:function(t){return t>=this.tracks.length?null:this.tracks[t]}},spine.SkeletonJson=function(t){this.attachmentLoader=t,this.linkedMeshes=[]},spine.SkeletonJson.prototype={scale:1,readSkeletonData:function(t,e){var n=new spine.SkeletonData;n.name=e;var i=t.skeleton;i&&(n.hash=i.hash,n.version=i.spine,n.width=i.width||0,n.height=i.height||0);for(var a=0,r=(l=t.bones).length;a<r;a++){var s=l[a],o=null;if(s.parent&&!(o=n.findBone(s.parent)))throw"Parent bone not found: "+s.parent;(w=new spine.BoneData(s.name,o)).length=(s.length||0)*this.scale,w.x=(s.x||0)*this.scale,w.y=(s.y||0)*this.scale,w.rotation=s.rotation||0,w.scaleX=s.hasOwnProperty("scaleX")?s.scaleX:1,w.scaleY=s.hasOwnProperty("scaleY")?s.scaleY:1,w.inheritScale=!s.hasOwnProperty("inheritScale")||s.inheritScale,w.inheritRotation=!s.hasOwnProperty("inheritRotation")||s.inheritRotation,n.bones[a]=w}var h=t.ik;if(h)for(a=0,r=h.length;a<r;a++){for(var l,p=h[a],f=new spine.IkConstraintData(p.name),u=0,d=(l=p.bones).length;u<d;u++){var c=n.findBone(l[u]);if(!c)throw"IK bone not found: "+l[u];f.bones[u]=c}if(f.target=n.findBone(p.target),!f.target)throw"Target bone not found: "+p.target;f.bendDirection=!p.hasOwnProperty("bendPositive")||p.bendPositive?1:-1,f.mix=p.hasOwnProperty("mix")?p.mix:1,n.ikConstraints[a]=f}var g=t.transform;if(g)for(a=0,r=g.length;a<r;a++){var m=g[a],v=new spine.TransformConstraintData(m.name);if(v.bone=n.findBone(m.bone),!v.bone)throw"Bone not found: "+m.bone;if(v.target=n.findBone(m.target),!v.target)throw"Target bone not found: "+m.target;v.mix=m.hasOwnProperty("translateMix")?p.translateMix:1,v.x=(m.x||0)*this.scale,v.y=(m.y||0)*this.scale,n.transformConstraints[a]=v}var y=t.slots;for(a=0,r=y.length;a<r;a++){var w,b=y[a];if(!(w=n.findBone(b.bone)))throw"Slot bone not found: "+b.bone;var x=new spine.SlotData(b.name,w),A=b.color;A&&(x.r=this.toColor(A,0),x.g=this.toColor(A,1),x.b=this.toColor(A,2),x.a=this.toColor(A,3)),x.attachmentName=b.attachment,x.blendMode=spine.BlendMode[b.blend||"normal"],n.slots[a]=x}var S=t.skins;for(var k in S)if(S.hasOwnProperty(k)){var T=S[k],C=new spine.Skin(k);for(var M in T)if(T.hasOwnProperty(M)){var P=n.findSlotIndex(M),O=T[M];for(var I in O)if(O.hasOwnProperty(I)){var X=this.readAttachment(C,P,I,O[I]);X&&C.addAttachment(P,I,X)}}n.skins[n.skins.length]=C,"default"==C.name&&(n.defaultSkin=C)}for(a=0,r=this.linkedMeshes.length;a<r;a++){var F=this.linkedMeshes[a];if(!(C=F.skin?n.findSkin(F.skin):n.defaultSkin))throw"Skin not found: "+F.skin;if(!(o=C.getAttachment(F.slotIndex,F.parent)))throw"Parent mesh not found: "+F.parent;F.mesh.setParentMesh(o),F.mesh.updateUVs()}this.linkedMeshes.length=0;var Y=t.events;for(var V in Y)if(Y.hasOwnProperty(V)){var D=Y[V],U=new spine.EventData(V);U.intValue=D.int||0,U.floatValue=D.float||0,U.stringValue=D.string||null,n.events[n.events.length]=U}var W=t.animations;for(var B in W)W.hasOwnProperty(B)&&this.readAnimation(B,W[B],n);return n},readAttachment:function(t,e,n,i){n=i.name||n;var a=i.type||"region";"skinnedmesh"==a&&(a="weightedmesh"),a=spine.AttachmentType[a];var r=i.path||n,s=this.scale;switch(a){case spine.AttachmentType.region:var o=this.attachmentLoader.newRegionAttachment(t,n,r);if(!o)return null;o.path=r,o.x=(i.x||0)*s,o.y=(i.y||0)*s,o.scaleX=i.hasOwnProperty("scaleX")?i.scaleX:1,o.scaleY=i.hasOwnProperty("scaleY")?i.scaleY:1,o.rotation=i.rotation||0,o.width=(i.width||0)*s,o.height=(i.height||0)*s;var h=i.color;return h&&(o.r=this.toColor(h,0),o.g=this.toColor(h,1),o.b=this.toColor(h,2),o.a=this.toColor(h,3)),o.updateOffset(),o;case spine.AttachmentType.mesh:case spine.AttachmentType.linkedmesh:return(l=this.attachmentLoader.newMeshAttachment(t,n,r))?(l.path=r,(h=i.color)&&(l.r=this.toColor(h,0),l.g=this.toColor(h,1),l.b=this.toColor(h,2),l.a=this.toColor(h,3)),l.width=(i.width||0)*s,l.height=(i.height||0)*s,i.parent?(l.inheritFFD=!i.hasOwnProperty("ffd")||i.ffd,this.linkedMeshes[this.linkedMeshes.length]={mesh:l,skin:i.skin,slotIndex:e,parent:i.parent}):(l.vertices=this.getFloatArray(i,"vertices",s),l.triangles=this.getUint32Array(i,"triangles"),l.regionUVs=this.getFloatArray(i,"uvs",1),l.updateUVs(),l.hullLength=2*(i.hull||0),i.edges&&(l.edges=this.getUint16Array(i,"edges"))),l):null;case spine.AttachmentType.weightedmesh:case spine.AttachmentType.weightedlinkedmesh:var l;if(!(l=this.attachmentLoader.newWeightedMeshAttachment(t,n,r)))return null;if(l.path=r,(h=i.color)&&(l.r=this.toColor(h,0),l.g=this.toColor(h,1),l.b=this.toColor(h,2),l.a=this.toColor(h,3)),l.width=(i.width||0)*s,l.height=(i.height||0)*s,i.parent)l.inheritFFD=!i.hasOwnProperty("ffd")||i.ffd,this.linkedMeshes[this.linkedMeshes.length]={mesh:l,skin:i.skin,slotIndex:e,parent:i.parent};else{for(var p=this.getFloatArray(i,"uvs",1),f=this.getFloatArray(i,"vertices",1),u=new spine.Float32Array(3*p.length*3),d=new spine.Uint32Array(3*p.length),c=0,g=0,m=0,v=f.length;c<v;){var y=0|f[c++];d[g++]=y;for(var w=c+4*y;c<w;)d[g++]=f[c],u[m++]=f[c+1]*s,u[m++]=f[c+2]*s,u[m++]=f[c+3],c+=4}l.bones=d,l.weights=u,l.triangles=this.getUint32Array(i,"triangles"),l.regionUVs=p,l.updateUVs(),l.hullLength=2*(i.hull||0),i.edges&&(l.edges=this.getUint16Array(i,"edges"))}return l;case spine.AttachmentType.boundingbox:var b=this.attachmentLoader.newBoundingBoxAttachment(t,n);f=i.vertices;b.vertices=new spine.Float32Array(f.length);for(c=0,v=f.length;c<v;c++)b.vertices[c]=f[c]*s;return b}throw"Unknown attachment type: "+a},readAnimation:function(t,e,n){var i=[],a=0,r=e.slots;for(var s in r)if(r.hasOwnProperty(s)){var o=r[s],h=n.findSlotIndex(s);for(var l in o)if(o.hasOwnProperty(l)){var p=o[l];if("color"==l){(W=new spine.ColorTimeline(p.length)).slotIndex=h;for(var f=0,u=0,d=p.length;u<d;u++){var c=(w=p[u]).color,g=this.toColor(c,0),m=this.toColor(c,1),v=this.toColor(c,2),y=this.toColor(c,3);W.setFrame(f,w.time,g,m,v,y),this.readCurve(W,f,w),f++}i[i.length]=W,a=Math.max(a,W.frames[5*W.getFrameCount()-5])}else{if("attachment"!=l)throw"Invalid timeline type for a slot: "+l+" ("+s+")";(W=new spine.AttachmentTimeline(p.length)).slotIndex=h;for(f=0,u=0,d=p.length;u<d;u++){var w=p[u];W.setFrame(f++,w.time,w.name)}i[i.length]=W,a=Math.max(a,W.frames[W.getFrameCount()-1])}}}var b=e.bones;for(var x in b)if(b.hasOwnProperty(x)){var A=n.findBoneIndex(x);if(-1==A)throw"Bone not found: "+x;var S=b[x];for(var l in S)if(S.hasOwnProperty(l)){p=S[l];if("rotate"==l){(W=new spine.RotateTimeline(p.length)).boneIndex=A;for(f=0,u=0,d=p.length;u<d;u++){w=p[u];W.setFrame(f,w.time,w.angle),this.readCurve(W,f,w),f++}i[i.length]=W,a=Math.max(a,W.frames[2*W.getFrameCount()-2])}else{if("translate"!=l&&"scale"!=l)throw"Invalid timeline type for a bone: "+l+" ("+x+")";var k=1;"scale"==l?W=new spine.ScaleTimeline(p.length):(W=new spine.TranslateTimeline(p.length),k=this.scale),W.boneIndex=A;for(f=0,u=0,d=p.length;u<d;u++){var T=((w=p[u]).x||0)*k,C=(w.y||0)*k;W.setFrame(f,w.time,T,C),this.readCurve(W,f,w),f++}i[i.length]=W,a=Math.max(a,W.frames[3*W.getFrameCount()-3])}}}var M=e.ik;for(var P in M)if(M.hasOwnProperty(P)){var O=n.findIkConstraint(P);p=M[P];(W=new spine.IkConstraintTimeline(p.length)).ikConstraintIndex=n.ikConstraints.indexOf(O);for(f=0,u=0,d=p.length;u<d;u++){var I=(w=p[u]).hasOwnProperty("mix")?w.mix:1,X=!w.hasOwnProperty("bendPositive")||w.bendPositive?1:-1;W.setFrame(f,w.time,I,X),this.readCurve(W,f,w),f++}i[i.length]=W,a=Math.max(a,W.frames[3*W.getFrameCount()-3])}var F=e.ffd;for(var Y in F){var V=n.findSkin(Y);o=F[Y];for(s in o){h=n.findSlotIndex(s);var D=o[s];for(var U in D){p=D[U];var W=new spine.FfdTimeline(p.length),B=V.getAttachment(h,U);if(!B)throw"FFD attachment not found: "+U;W.slotIndex=h,W.attachment=B;var E,R=B.type==spine.AttachmentType.mesh;E=R?B.vertices.length:B.weights.length/3*2;for(f=0,u=0,d=p.length;u<d;u++){if((w=p[u]).vertices){var L,N=w.vertices;(L=new spine.Float32Array(E)).length=E;var _=w.offset||0,H=N.length;if(1==this.scale)for(var j=0;j<H;j++)L[j+_]=N[j];else for(j=0;j<H;j++)L[j+_]=N[j]*this.scale;if(R){var G=B.vertices;for(j=0,H=L.length;j<H;j++)L[j]+=G[j]}}else R?L=B.vertices:(L=new spine.Float32Array(E)).length=E;W.setFrame(f,w.time,L),this.readCurve(W,f,w),f++}i[i.length]=W,a=Math.max(a,W.frames[W.getFrameCount()-1])}}}var q=e.drawOrder;if(q||(q=e.draworder),q){W=new spine.DrawOrderTimeline(q.length);var J=n.slots.length;for(f=0,u=0,d=q.length;u<d;u++){var K=q[u],$=null;if(K.offsets){($=new spine.Uint32Array(J)).length=J;for(j=J-1;j>=0;j--)$[j]=4294967295;var z=K.offsets,Q=new spine.Uint32Array(J-z.length);Q.length=J-z.length;var Z=0,tt=0;for(j=0,H=z.length;j<H;j++){var et=z[j];if(-1==(h=n.findSlotIndex(et.slot)))throw"Slot not found: "+et.slot;for(;Z!=h;)Q[tt++]=Z++;$[Z+et.offset]=Z++}for(;Z<J;)Q[tt++]=Z++;for(j=J-1;j>=0;j--)4294967295==$[j]&&($[j]=Q[--tt])}W.setFrame(f++,K.time,$)}i[i.length]=W,a=Math.max(a,W.frames[W.getFrameCount()-1])}var nt=e.events;if(nt){for(W=new spine.EventTimeline(nt.length),f=0,u=0,d=nt.length;u<d;u++){var it=nt[u],at=n.findEvent(it.name);if(!at)throw"Event not found: "+it.name;var rt=new spine.Event(it.time,at);rt.intValue=it.hasOwnProperty("int")?it.int:at.intValue,rt.floatValue=it.hasOwnProperty("float")?it.float:at.floatValue,rt.stringValue=it.hasOwnProperty("string")?it.string:at.stringValue,W.setFrame(f++,rt)}i[i.length]=W,a=Math.max(a,W.frames[W.getFrameCount()-1])}n.animations[n.animations.length]=new spine.Animation(t,i,a)},readCurve:function(t,e,n){var i=n.curve;i?"stepped"==i?t.curves.setStepped(e):i instanceof Array&&t.curves.setCurve(e,i[0],i[1],i[2],i[3]):t.curves.setLinear(e)},toColor:function(t,e){if(8!=t.length)throw"Color hexidecimal length must be 8, recieved: "+t;return parseInt(t.substring(2*e,2*e+2),16)/255},getFloatArray:function(t,e,n){var i=t[e],a=new spine.Float32Array(i.length),r=0,s=i.length;if(1==n)for(;r<s;r++)a[r]=i[r];else for(;r<s;r++)a[r]=i[r]*n;return a},getUint32Array:function(t,e){for(var n=t[e],i=new spine.Uint32Array(n.length),a=0,r=n.length;a<r;a++)i[a]=0|n[a];return i},getUint16Array:function(t,e){for(var n=t[e],i=new spine.Uint16Array(n.length),a=0,r=n.length;a<r;a++)i[a]=0|n[a];return i}},spine.Atlas=function(t,e){this.textureLoader=e,this.pages=[],this.regions=[];var n=new spine.AtlasReader(t),i=[];i.length=4;for(var a=null;;){var r=n.readLine();if(null===r)break;if((r=n.trim(r)).length)if(a){var s=new spine.AtlasRegion;s.name=r,s.page=a,s.rotate="true"==n.readValue(),n.readTuple(i);var o=parseInt(i[0]),h=parseInt(i[1]);n.readTuple(i);var l=parseInt(i[0]),p=parseInt(i[1]);s.u=o/a.width,s.v=h/a.height,s.rotate?(s.u2=(o+p)/a.width,s.v2=(h+l)/a.height):(s.u2=(o+l)/a.width,s.v2=(h+p)/a.height),s.x=o,s.y=h,s.width=Math.abs(l),s.height=Math.abs(p),4==n.readTuple(i)&&(s.splits=[parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],4==n.readTuple(i)&&(s.pads=[parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],n.readTuple(i))),s.originalWidth=parseInt(i[0]),s.originalHeight=parseInt(i[1]),n.readTuple(i),s.offsetX=parseInt(i[0]),s.offsetY=parseInt(i[1]),s.index=parseInt(n.readValue()),this.regions[this.regions.length]=s}else{(a=new spine.AtlasPage).name=r,2==n.readTuple(i)&&(a.width=parseInt(i[0]),a.height=parseInt(i[1]),n.readTuple(i)),a.format=spine.Atlas.Format[i[0]],n.readTuple(i),a.minFilter=spine.Atlas.TextureFilter[i[0]],a.magFilter=spine.Atlas.TextureFilter[i[1]];var f=n.readValue();a.uWrap=spine.Atlas.TextureWrap.clampToEdge,a.vWrap=spine.Atlas.TextureWrap.clampToEdge,"x"==f?a.uWrap=spine.Atlas.TextureWrap.repeat:"y"==f?a.vWrap=spine.Atlas.TextureWrap.repeat:"xy"==f&&(a.uWrap=a.vWrap=spine.Atlas.TextureWrap.repeat),e.load(a,r,this),this.pages[this.pages.length]=a}else a=null}},spine.Atlas.prototype={findRegion:function(t){for(var e=this.regions,n=0,i=e.length;n<i;n++)if(e[n].name==t)return e[n];return null},dispose:function(){for(var t=this.pages,e=0,n=t.length;e<n;e++)this.textureLoader.unload(t[e].rendererObject)},updateUVs:function(t){for(var e=this.regions,n=0,i=e.length;n<i;n++){var a=e[n];a.page==t&&(a.u=a.x/t.width,a.v=a.y/t.height,a.rotate?(a.u2=(a.x+a.height)/t.width,a.v2=(a.y+a.width)/t.height):(a.u2=(a.x+a.width)/t.width,a.v2=(a.y+a.height)/t.height))}}},spine.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},spine.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},spine.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},spine.AtlasPage=function(){},spine.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},spine.AtlasRegion=function(){},spine.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},spine.AtlasReader=function(t){this.lines=t.split(/\r\n|\r|\n/)},spine.AtlasReader.prototype={index:0,trim:function(t){return t.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw"Invalid line: "+t;return this.trim(t.substring(e+1))},readTuple:function(t){var e=this.readLine(),n=e.indexOf(":");if(-1==n)throw"Invalid line: "+e;for(var i=0,a=n+1;i<3;i++){var r=e.indexOf(",",a);if(-1==r)break;t[i]=this.trim(e.substr(a,r-a)),a=r+1}return t[i]=this.trim(e.substring(a)),i+1}},spine.AtlasAttachmentLoader=function(t){this.atlas=t},spine.AtlasAttachmentLoader.prototype={newRegionAttachment:function(t,e,n){var i=this.atlas.findRegion(n);if(!i)throw"Region not found in atlas: "+n+" (region attachment: "+e+")";var a=new spine.RegionAttachment(e);return a.rendererObject=i,a.setUVs(i.u,i.v,i.u2,i.v2,i.rotate),a.regionOffsetX=i.offsetX,a.regionOffsetY=i.offsetY,a.regionWidth=i.width,a.regionHeight=i.height,a.regionOriginalWidth=i.originalWidth,a.regionOriginalHeight=i.originalHeight,a},newMeshAttachment:function(t,e,n){var i=this.atlas.findRegion(n);if(!i)throw"Region not found in atlas: "+n+" (mesh attachment: "+e+")";var a=new spine.MeshAttachment(e);return a.rendererObject=i,a.regionU=i.u,a.regionV=i.v,a.regionU2=i.u2,a.regionV2=i.v2,a.regionRotate=i.rotate,a.regionOffsetX=i.offsetX,a.regionOffsetY=i.offsetY,a.regionWidth=i.width,a.regionHeight=i.height,a.regionOriginalWidth=i.originalWidth,a.regionOriginalHeight=i.originalHeight,a},newWeightedMeshAttachment:function(t,e,n){var i=this.atlas.findRegion(n);if(!i)throw"Region not found in atlas: "+n+" (weighted mesh attachment: "+e+")";var a=new spine.WeightedMeshAttachment(e);return a.rendererObject=i,a.regionU=i.u,a.regionV=i.v,a.regionU2=i.u2,a.regionV2=i.v2,a.regionRotate=i.rotate,a.regionOffsetX=i.offsetX,a.regionOffsetY=i.offsetY,a.regionWidth=i.width,a.regionHeight=i.height,a.regionOriginalWidth=i.originalWidth,a.regionOriginalHeight=i.originalHeight,a},newBoundingBoxAttachment:function(t,e){return new spine.BoundingBoxAttachment(e)}},spine.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},spine.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(t,e){var n=t.slots,i=n.length,a=t.x,r=t.y,s=this.boundingBoxes,o=this.polygonPool,h=this.polygons;s.length=0;for(var l=0,p=h.length;l<p;l++)o[o.length]=h[l];h.length=0;for(l=0;l<i;l++){var f=n[l],u=f.attachment;if(u.type==spine.AttachmentType.boundingbox){s[s.length]=u;var d,c=o.length;c>0?(d=o[c-1],o.splice(c-1,1)):d=new spine.Float32Array,h[h.length]=d,d.length=u.vertices.length,u.computeWorldVertices(a,r,f.bone,d)}}e&&this.aabbCompute()},aabbCompute:function(){for(var t=this.polygons,e=Number.MAX_VALUE,n=Number.MAX_VALUE,i=-Number.MAX_VALUE,a=-Number.MAX_VALUE,r=0,s=t.length;r<s;r++)for(var o=t[r],h=0,l=o.length;h<l;h+=2){var p=o[h],f=o[h+1];e=Math.min(e,p),n=Math.min(n,f),i=Math.max(i,p),a=Math.max(a,f)}this.minX=e,this.minY=n,this.maxX=i,this.maxY=a},aabbContainsPoint:function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},aabbIntersectsSegment:function(t,e,n,i){var a=this.minX,r=this.minY,s=this.maxX,o=this.maxY;if(t<=a&&n<=a||e<=r&&i<=r||t>=s&&n>=s||e>=o&&i>=o)return!1;var h=(i-e)/(n-t),l=h*(a-t)+e;if(l>r&&l<o)return!0;if((l=h*(s-t)+e)>r&&l<o)return!0;var p=(r-e)/h+t;return p>a&&p<s||(p=(o-e)/h+t)>a&&p<s},aabbIntersectsSkeleton:function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},containsPoint:function(t,e){for(var n=this.polygons,i=0,a=n.length;i<a;i++)if(this.polygonContainsPoint(n[i],t,e))return this.boundingBoxes[i];return null},intersectsSegment:function(t,e,n,i){for(var a=this.polygons,r=0,s=a.length;r<s;r++)if(a[r].intersectsSegment(t,e,n,i))return this.boundingBoxes[r];return null},polygonContainsPoint:function(t,e,n){for(var i=t.length,a=i-2,r=!1,s=0;s<i;s+=2){var o=t[s+1],h=t[a+1];if(o<n&&h>=n||h<n&&o>=n){var l=t[s];l+(n-o)/(h-o)*(t[a]-l)<e&&(r=!r)}a=s}return r},polygonIntersectsSegment:function(t,e,n,i,a){for(var r=t.length,s=e-i,o=n-a,h=e*a-n*i,l=t[r-2],p=t[r-1],f=0;f<r;f+=2){var u=t[f],d=t[f+1],c=l*d-p*u,g=l-u,m=p-d,v=s*m-o*g,y=(h*g-s*c)/v;if((y>=l&&y<=u||y>=u&&y<=l)&&(y>=e&&y<=i||y>=i&&y<=e)){var w=(h*m-o*c)/v;if((w>=p&&w<=d||w>=d&&w<=p)&&(w>=n&&w<=a||w>=a&&w<=n))return!0}l=u,p=d}return!1},getPolygon:function(t){var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}};var PhaserSpine,__extends=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)};!function(t){var e=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.addSpineCache(),i.addSpineFactory(),i.addSpineLoader(),i}return __extends(n,e),n.prototype.addSpineLoader=function(){Phaser.Loader.prototype.spine=function(t,e,n){var i=this,a=t+"Atlas",r={atlas:a,basePath:""===e.substring(0,e.lastIndexOf("/"))?".":e.substring(0,e.lastIndexOf("/")),variants:void 0};void 0===n?n=[""]:r.variants=n,n.forEach(function(t){i.onFileComplete.add(function(e,n){if(n===a)new spine.Atlas(i.game.cache.getText(n),{load:function(e,n,a){i.image(n,r.basePath+"/"+n.substr(0,n.lastIndexOf("."))+t+".png")}})}),i.text(a,e.substr(0,e.lastIndexOf("."))+t+".atlas")}),this.json(t,e),this.game.cache.addSpine(t,r)}},n.prototype.addSpineFactory=function(){Phaser.GameObjectFactory.prototype.spine=function(e,n,i,a,r){void 0===r&&(r=this.world);var s=new t.Spine(this.game,i,a);return s.setToSetupPose(),s.position.x=e,s.position.y=n,r.add(s)},Phaser.GameObjectCreator.prototype.spine=function(e,n,i,a,r){return new t.Spine(this.game,i,a)}},n.prototype.addSpineCache=function(){Phaser.Cache.prototype.spine={},Phaser.Cache.prototype.addSpine=function(t,e){this.spine[t]=e},Phaser.Cache.prototype.getSpine=function(t){return this.spine.hasOwnProperty(t)||console.warn('Phaser.Cache.getSpine: Key "'+t+'" not found in Cache.'),this.spine[t]}},n}(Phaser.Plugin);e.RESOLUTION_REGEXP=/@(.+)x/,t.SpinePlugin=e}(PhaserSpine||(PhaserSpine={})),Phaser.Rope.prototype.postUpdate=function(){},spine.Bone.yDown=!0,function(t){var e=function(e){function n(n,i,a){var r=e.call(this,n)||this;r.imageScale=1;var s=r.game.cache.getSpine(i);void 0!==a&&-1!==s.variants.indexOf(a)?r.imageScale=r.getScaleFromVariant(a):s.variants&&s.variants.length>=1&&(r.imageScale=r.getScaleFromVariant(s.variants[0]));var o=new t.SpineTextureLoader(n),h=new spine.Atlas(n.cache.getText(s.atlas),o),l=new spine.AtlasAttachmentLoader(h),p=new spine.SkeletonJson(l);if(r.skeletonData=p.readSkeletonData(n.cache.getJSON(i)),!r.skeletonData)throw new Error("Spine data must be preloaded using Loader.spine");r.onEvent=new Phaser.Signal,r.onComplete=new Phaser.Signal,r.onEnd=new Phaser.Signal,r.skeleton=new spine.Skeleton(r.skeletonData),r.skeleton.updateWorldTransform(),r.stateData=new spine.AnimationStateData(r.skeletonData),r.state=new spine.AnimationState(r.stateData),r.state.onEvent=r.onEvent.dispatch.bind(r.onEvent),r.state.onComplete=r.onComplete.dispatch.bind(r.onComplete),r.state.onEnd=r.onEnd.dispatch.bind(r.onEnd),r.slotContainers=[],r.speed=1;for(var f=0,u=r.skeleton.slots.length;f<u;f++){var d=r.skeleton.slots[f],c=d.attachment,g=new Phaser.Group(n);if(r.slotContainers.push(g),r.add(g),c instanceof spine.RegionAttachment){var m=c.rendererObject.name,v=r.createSprite(d,c);d.currentSprite=v,d.currentSpriteName=m,g.add(v)}else{if(!(c instanceof spine.WeightedMeshAttachment))continue;var y=r.createMesh(d,c);d.currentMesh=y,d.currentMeshName=c.name,g.add(y)}}return r.autoUpdate=!0,r}return __extends(n,e),Object.defineProperty(n.prototype,"autoUpdate",{get:function(){return this.updateTransform===t.Spine.prototype.autoUpdateTransform},set:function(e){this.updateTransform=e?t.Spine.prototype.autoUpdateTransform:PIXI.DisplayObjectContainer.prototype.updateTransform},enumerable:!0,configurable:!0}),n.prototype.getScaleFromVariant=function(e){var n=t.SpinePlugin.RESOLUTION_REGEXP.exec(e);return n?parseFloat(n[1]):1},n.prototype.setTint=function(t){this.globalTint=t;for(var e=this.skeleton.slots,n=0;n<e.length;n++){e[n].currentSprite.tint=t}},n.prototype.update=function(t){if(void 0!==t){this.state.update(t*this.speed),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var e=this.skeleton.drawOrder,n=this.skeleton.slots,i=0,a=e.length;i<a;i++)void 0!==e[i].currentSprite&&(this.children[i]=e[i].currentSprite.parent);for(i=0,a=n.length;i<a;i++){var r=n[i],s=r.attachment,o=this.slotContainers[i];if(s){var h=s.type;if(h===spine.AttachmentType.region){if(s.rendererObject&&(!r.currentSpriteName||r.currentSpriteName!==s.name)){var l=s.rendererObject.name;if(void 0!==r.currentSprite&&(r.currentSprite.visible=!1),r.sprites=r.sprites||{},void 0!==r.sprites[l])r.sprites[l].visible=!0;else{var p=this.createSprite(r,s);o.add(p)}r.currentSprite=r.sprites[l],r.currentSpriteName=l}var f=r.bone;o.position.x=s.x*f.a+s.y*f.b+f.worldX,o.position.y=s.x*f.c+s.y*f.d+f.worldY,o.scale.x=f.getWorldScaleX(),o.scale.y=f.getWorldScaleY(),o.rotation=(f.getWorldRotationX()-s.rotation)*Math.PI/180,f.getWorldScaleY()<0&&(o.scale.y=-o.scale.y),f.getWorldScaleX()<0&&(o.scale.x=-o.scale.x),(f.getWorldScaleY()<0||f.getWorldScaleX()<0)&&(o.rotation=-o.rotation),r.currentSprite.blendMode=r.blendMode,this.globalTint||(r.currentSprite.tint=r.currentSprite.tint=parseInt(Phaser.Color.componentToHex(255*r.r).substring(0,2)+Phaser.Color.componentToHex(255*r.g).substring(0,2)+Phaser.Color.componentToHex(255*r.b).substring(0,2),16))}else{if(h!==spine.AttachmentType.weightedmesh&&h!==spine.AttachmentType.weightedlinkedmesh){o.visible=!1;continue}if(!r.currentMeshName||r.currentMeshName!==s.name){var u=s.name;if(void 0!==r.currentMesh&&(r.currentMesh.visible=!1),r.meshes=r.meshes||{},void 0!==r.meshes[u])r.meshes[u].visible=!0;else{var d=this.createMesh(r,s);o.add(d)}r.currentMesh=r.meshes[u],r.currentMeshName=u}s.computeWorldVertices(r.bone.skeleton.x,r.bone.skeleton.y,r,r.currentMesh.vertices)}o.visible=!0,o.alpha=r.a}else o.visible=!1}}},n.prototype.destroy=function(t,n){e.prototype.destroy.call(this,!0,n)},n.prototype.autoUpdateTransform=function(){if(n.globalAutoUpdate){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t)}else this.lastTime=0;PIXI.DisplayObjectContainer.prototype.updateTransform.call(this)},n.prototype.createSprite=function(t,e){var n=e.rendererObject,i=n.page.rendererObject,a=new PIXI.Rectangle(n.x,n.y,n.rotate?n.height:n.width,n.rotate?n.width:n.height),r=new PIXI.Texture(i,a),s=new Phaser.Sprite(this.game,0,0,r),o=n.rotate?.5*Math.PI:0;if(s.scale.x=n.width/n.originalWidth*e.scaleX/this.imageScale,s.scale.y=n.height/n.originalHeight*e.scaleY/this.imageScale,s.rotation=o,s.anchor.x=(.5*n.originalWidth-n.offsetX)/n.width,s.anchor.y=1-(.5*n.originalHeight-n.offsetY)/n.height,s.alpha=e.a,n.rotate){var h=s.scale.x;s.scale.x=s.scale.y,s.scale.y=h}return t.sprites=t.sprites||{},t.sprites[n.name]=s,s},n.prototype.createMesh=function(t,e){var n=e.rendererObject.page.rendererObject,i=new PIXI.Texture(n),a=new Phaser.Rope(this.game,0,0,i);return a.drawMode=1,a.canvasPadding=1.5,a.vertices=new spine.Float32Array(e.uvs.length),a.uvs=e.uvs,a.indices=e.triangles,a.alpha=e.a,t.meshes=t.meshes||{},t.meshes[e.name]=a,a},n.prototype.setMixByName=function(t,e,n){this.stateData.setMixByName(t,e,n)},n.prototype.setAnimationByName=function(t,e,n){void 0===n&&(n=!1);var i=this.state.data.skeletonData.findAnimation(e);return i?this.state.setAnimation(t,i,n):(console.warn("Animation not found: "+e),null)},n.prototype.addAnimationByName=function(t,e,n,i){void 0===n&&(n=!1),void 0===i&&(i=0);var a=this.state.data.skeletonData.findAnimation(e);return a?this.state.addAnimation(t,a,n,i):(console.warn("Animation not found: "+e),null)},n.prototype.getCurrentAnimationForTrack=function(t){return this.state.tracks[t].animation.name},n.prototype.setSkinByName=function(t){var e=this.skeleton.data.findSkin(t);e?this.skeleton.setSkin(e):console.warn("Skin not found: "+t)},n.prototype.setSkin=function(t){this.skeleton.setSkin(t)},n.prototype.setToSetupPose=function(){this.skeleton.setToSetupPose()},n.prototype.createCombinedSkin=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(0!==e.length){for(var i=new spine.Skin(t),a=0;a<e.length;a++){var r=e[a],s=this.skeleton.data.findSkin(r);if(!s)return void console.warn("Skin not found: "+r);for(var o in s.attachments){var h=o.split(":"),l=h[0],p=h[1],f=s.attachments[o];if(void 0===l||void 0===p)return void console.warn("something went wrong with reading the attachments index and/or name");void 0===i.getAttachment(l,p)?i.addAttachment(l,p,f):console.warn("Found double attachment for: "+r+". Skipping")}}return this.skeleton.data.skins.push(i),i}console.warn("Unable to combine skins when no skins are passed...")},n}(Phaser.Group);e.globalAutoUpdate=!0,t.Spine=e}(PhaserSpine||(PhaserSpine={})),function(t){var e=function(){return function(t){this.load=function(t,e,n){var i=this.game.make.image(0,0,e);t.rendererObject=i.texture.baseTexture},this.unload=function(t){t.destroy()},this.game=t}}();t.SpineTextureLoader=e}(PhaserSpine||(PhaserSpine={}));